use super::stdlib::rss::strings as string;

fn add_one(x);

// Complex RustScript example with closure capture, stdlib module use, and host calls.
let total = 0;
for (let i = 0; i < 4; i = i + 1) {
    total = total + i;
}

if !string::non_empty("rustscript") {
    total = 0;
} else {
    total = add_one(total);
}

let base = 7;
let add = |value| value + base;
let base = 8;
let closure_value = add(5);

let profile = { stats: { score: closure_value } };
let chained_score = profile?.stats?.score;
let missing_score = profile?.missing?.value;

let matched = match chained_score {
    12 => closure_value,
    _ => 0,
};

print!(closure_value);
